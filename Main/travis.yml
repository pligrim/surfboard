language: go
env:
 - GO111MODULE=on
go_import_path: https://github.com/pligrim/surfboard
matrix:
  fast_finish: true
  include:
  - go: '1.11'
  - go: '1.12'
    name: Deployment
    before_deploy:
    - CGO_ENABLED=0 GOARCH=linux go build Main -ldflags="-s -w" -o "surfboard_linux"
    - CGO_ENABLED=0 GOARCH=amd64 go build Main -ldflags="-s -w" -o "surfboard_amd64"
    deploy:
      provider: releases
      api_key: 5229c1e15bc7797def97e967d87dce8893ce5085
      file_glob: true
      file: surfboard_*
      skip_cleanup: true
      on:
        tags: true
        repo: pligrim/surfboard
        branch: master
  - go: master